@{
    Layout = null;
    ViewData["Title"] = "Táº¡o Admin Äáº§u TiÃªn";
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Jollibee Admin</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="~/css/admin-login.css" rel="stylesheet" />
</head>
<body>
    <div class="login-container">
        <!-- Header -->
        <div class="login-header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-user-shield"></i>
                </div>
                <h1>Tạo Admin Đầu Tiên</h1>
                <p>Tạo tài khoản quản trị viên đầu tiên cho hệ thống</p>
            </div>
        </div>

        <!-- Body -->
        <div class="login-body">
            <div class="text-center mb-4">
                <button id="createAdminBtn" class="btn btn-login">
                    <i class="fas fa-user-plus me-2"></i>
                    Tạo Admin Ngay
                </button>
            </div>

            <div id="result" style="display: none;"></div>

            <div class="alert alert-info">
                <i class="fas fa-info-circle me-2"></i>
                <strong>Thông tin tài khoản admin sẽ được tạo:</strong><br>
                <strong>Email:</strong> admin@jollibee.com<br>
                <strong>Máº­t kháº©u:</strong> admin123<br>
                <small class="text-muted">Bạn có thể đổi mật khẩu sau khi đăng nhập</small>
            </div>

            <div class="footer-text">
                <p><a href="@Url.Action("Login", "Auth")">Quay lại trang đăng nhập</a></p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    
    <script>
        $(document).ready(function() {
            $('#createAdminBtn').on('click', function() {
                const $btn = $(this);
                const $result = $('#result');
                
                // Disable button vÃ  show loading
                $btn.prop('disabled', true).html('<i class="fas fa-spinner fa-spin me-2"></i>Đang tạo...');
                
                // Call API
                $.ajax({
                    url: '@Url.Action("CreateFirstAdminApi", "Auth")',
                    type: 'GET',
                    success: function(response) {
                        $result.removeClass('alert-danger').addClass('alert alert-success').show();
                        if (response.success) {
                            $result.html('<i class="fas fa-check-circle me-2"></i>' + response.message);
                            $btn.html('<i class="fas fa-check me-2"></i>Đã tạo thành công!');
                            
                            // Redirect to login after 3 seconds
                            setTimeout(function() {
                                window.location.href = '@Url.Action("Login", "Auth")';
                            }, 3000);
                        } else {
                            $result.html('<i class="fas fa-exclamation-triangle me-2"></i>' + response.message);
                            $btn.prop('disabled', false).html('<i class="fas fa-user-plus me-2"></i>Tạo Admin Ngay');
                        }
                    },
                    error: function() {
                        $result.removeClass('alert-success').addClass('alert alert-danger').show();
                        $result.html('<i class="fas fa-exclamation-circle me-2"></i>Có lỗi xảy ra khi tạo admin!');  
                        $btn.prop('disabled', false).html('<i class="fas fa-user-plus me-2"></i>Táº¡o Admin Ngay');
                    }
                });
            });
        });
    </script>
</body>
</html> 

